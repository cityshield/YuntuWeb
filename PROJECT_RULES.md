# ç››ä¸–äº‘å›¾å‰ç«¯é¡¹ç›®è§„åˆ™ (YuntuCV Web)

> âš ï¸ **é‡è¦**: æ‰§è¡Œä»»ä½•ä»»åŠ¡å‰å¿…é¡»å…ˆé˜…è¯»æœ¬æ–‡ä»¶ï¼

## ğŸ“Œ é¡¹ç›®å…³é”®é…ç½®ï¼ˆç¦æ­¢éšæ„ä¿®æ”¹ï¼‰

### ç«¯å£é…ç½®
- **å‰ç«¯å¼€å‘æœåŠ¡å™¨**: `http://localhost:5174`
  - ä½¿ç”¨ Vite æ„å»ºå·¥å…·
  - é…ç½®æ–‡ä»¶: `vite.config.js`
  - **ç¦æ­¢éšæ„æ›´æ”¹ç«¯å£å·**

- **åç«¯APIæœåŠ¡å™¨**: `http://localhost:8000`
  - ä½¿ç”¨ FastAPI + Uvicorn
  - é¡¹ç›®è·¯å¾„: `/Users/fengdaniu/Documents/cc/YuntuServer`
  - **ç¦æ­¢éšæ„æ›´æ”¹ç«¯å£å·**

### APIé…ç½®
- **API Base URL**: `http://localhost:8000/api/v1`
- **é…ç½®æ–‡ä»¶**: `scripts/api-config.js`
- **ç¯å¢ƒæ£€æµ‹**: è‡ªåŠ¨æ ¹æ® hostname åˆ¤æ–­ development/production

### CORSé…ç½®
- **åç«¯CORSç™½åå•**:
  - `http://localhost:5173`
  - `http://localhost:5174` âœ… å½“å‰ä½¿ç”¨
  - `http://localhost:3000`
  - `http://localhost:8080`
  - `https://yuntucv.com`
  - `https://www.yuntucv.com`
- **é…ç½®ä½ç½®**: `YuntuServer/.env` çš„ `CORS_ORIGINS`
- **é‡è¦**: æ·»åŠ æ–°ç«¯å£åå¿…é¡»é‡å¯åç«¯æœåŠ¡

## ğŸ—‚ é¡¹ç›®ç»“æ„

```
yuntucv_web/
â”œâ”€â”€ index.html              # é¦–é¡µ
â”œâ”€â”€ auth.html               # ç™»å½•/æ³¨å†Œé¡µ
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ api-config.js       # APIé…ç½®å’Œå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.js             # è®¤è¯é€»è¾‘
â”‚   â””â”€â”€ main.js             # ä¸»é¡µé€»è¾‘
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ style.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js          # Viteé…ç½®
```

## ğŸ” è®¤è¯ç³»ç»Ÿ

### ç”¨æˆ·å‡­è¯ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰
- **æ‰‹æœºå·**: `15381272988`
- **å¯†ç **: `shengshu1020`
- **æ•°æ®åº“**: `/Users/fengdaniu/Documents/cc/YuntuServer/yuntu_test.db`

### Tokenç®¡ç†
- **Access Token**: å­˜å‚¨åœ¨ `localStorage.access_token`
- **Refresh Token**: å­˜å‚¨åœ¨ `localStorage.refresh_token`
- **ç”¨æˆ·ä¿¡æ¯**: å­˜å‚¨åœ¨ `localStorage.user_info`

## ğŸš¨ é”™è¯¯å¤„ç†è§„èŒƒ

### é”™è¯¯åˆ†ç±»
1. **æœåŠ¡ç«¯é”™è¯¯** (5xxã€ç½‘ç»œé”™è¯¯)
   - æ˜¾ç¤ºæ–¹å¼: Toasté€šçŸ¥ï¼ˆé¡¶éƒ¨ï¼‰
   - æç¤ºå†…å®¹: "æœåŠ¡ä¸å¯ç”¨ï¼Œè¯·è”ç³»å®˜æ–¹"

2. **ä¸šåŠ¡é€»è¾‘é”™è¯¯** (4xx)
   - æ˜¾ç¤ºæ–¹å¼: è¡¨å•ä¸‹æ–¹é”™è¯¯æç¤º
   - æç¤ºå†…å®¹: æ˜¾ç¤ºå…·ä½“çš„ä¸­æ–‡é”™è¯¯ä¿¡æ¯

### Toastç»„ä»¶
- å‡½æ•°: `showToast(message, type)`
- ç±»å‹: `error`, `warning`, `success`, `info`
- ä½ç½®: é¡µé¢é¡¶éƒ¨å±…ä¸­
- è‡ªåŠ¨æ¶ˆå¤±: 3ç§’

## ğŸ›  å¼€å‘æµç¨‹è§„èŒƒ

### å¯åŠ¨æœåŠ¡å™¨
```bash
# 1. å¯åŠ¨åç«¯ (åœ¨ YuntuServer ç›®å½•)
cd /Users/fengdaniu/Documents/cc/YuntuServer
source venv/bin/activate
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# 2. å¯åŠ¨å‰ç«¯ (åœ¨ yuntucv_web ç›®å½•)
cd /Users/fengdaniu/Documents/cc/yuntucv_web
npm run dev
```

### ä¿®æ”¹ä»£ç æ—¶å¿…é¡»éµå®ˆ
1. **ä¿®æ”¹ç«¯å£å‰**:
   - å¿…é¡»æ£€æŸ¥ CORS é…ç½®
   - æ›´æ–° API é…ç½®æ–‡ä»¶
   - æ›´æ–°æœ¬ RULES æ–‡ä»¶
   - é‡å¯æ‰€æœ‰æœåŠ¡

2. **ä¿®æ”¹ API ç«¯ç‚¹**:
   - æ£€æŸ¥ `scripts/api-config.js` ä¸­çš„ `API_ENDPOINTS`
   - ç¡®ä¿å‰åç«¯è·¯å¾„ä¸€è‡´
   - æµ‹è¯•æ‰€æœ‰ç›¸å…³åŠŸèƒ½

3. **ä¿®æ”¹è®¤è¯é€»è¾‘**:
   - ä¿æŒ Token åˆ·æ–°æœºåˆ¶
   - ä¿æŒé”™è¯¯å¤„ç†ä¸€è‡´æ€§
   - æµ‹è¯•ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºæµç¨‹

## ğŸ“ ä»£ç è§„èŒƒ

### JavaScriptè§„èŒƒ
- ä½¿ç”¨ ES6+ è¯­æ³•
- async/await å¤„ç†å¼‚æ­¥
- é”™è¯¯å¿…é¡»ç”¨ try-catch æ•è·
- ç¦æ­¢ä½¿ç”¨ `var`ï¼Œä½¿ç”¨ `const` å’Œ `let`

### APIè°ƒç”¨è§„èŒƒ
- ç»Ÿä¸€ä½¿ç”¨ `apiClient` å®ä¾‹
- æ‰€æœ‰è¯·æ±‚é€šè¿‡ `api-config.js` çš„æ–¹æ³•
- é”™è¯¯å¤„ç†éµå¾ªä¸Šè¿°è§„èŒƒ

### å‘½åè§„èŒƒ
- æ–‡ä»¶å: kebab-case (ä¾‹: `api-config.js`)
- å‡½æ•°å: camelCase (ä¾‹: `handleLogin`)
- å¸¸é‡: UPPER_SNAKE_CASE (ä¾‹: `API_BASE`)
- ç±»å: PascalCase (ä¾‹: `ApiClient`)

## ğŸ› å¸¸è§é—®é¢˜

### CORSé”™è¯¯
- **ç—‡çŠ¶**: Consoleæ˜¾ç¤º "blocked by CORS policy"
- **åŸå› **: å‰ç«¯ç«¯å£ä¸åœ¨åç«¯CORSç™½åå•ä¸­
- **è§£å†³**:
  1. ä¿®æ”¹ `YuntuServer/.env` çš„ `CORS_ORIGINS`
  2. é‡å¯åç«¯æœåŠ¡
  3. åˆ·æ–°å‰ç«¯é¡µé¢

### 401 æœªæˆæƒé”™è¯¯
- **ç—‡çŠ¶**: APIè¿”å›401çŠ¶æ€ç 
- **åŸå› **: Tokenè¿‡æœŸæˆ–æ— æ•ˆ
- **è‡ªåŠ¨å¤„ç†**: `api-config.js` ä¼šè‡ªåŠ¨å°è¯•åˆ·æ–°Token
- **å¤±è´¥å¤„ç†**: æ¸…é™¤Tokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ

### ç½‘ç»œé”™è¯¯
- **ç—‡çŠ¶**: Consoleæ˜¾ç¤º "Failed to fetch" æˆ– "ERR_FAILED"
- **åŸå› **: åç«¯æœåŠ¡æœªå¯åŠ¨æˆ–ç½‘ç»œé—®é¢˜
- **æ˜¾ç¤º**: Toastæç¤º "æœåŠ¡ä¸å¯ç”¨ï¼Œè¯·è”ç³»å®˜æ–¹"

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ ¸å¿ƒä¾èµ–
```json
{
  "vite": "^5.0.0",
  "aos": "^2.3.4",
  "swiper": "^11.0.0"
}
```

### å®‰è£…å‘½ä»¤
```bash
npm install
```

### æ›´æ–°ä¾èµ–
- **è°¨æ…æ›´æ–°**: ç‰¹åˆ«æ˜¯ vite ç‰ˆæœ¬
- **æµ‹è¯•å…¨é¢**: æ›´æ–°åæµ‹è¯•æ‰€æœ‰åŠŸèƒ½

## ğŸ”„ Gitå·¥ä½œæµ

### æäº¤å‰æ£€æŸ¥
- [ ] ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ
- [ ] æ˜¯å¦æµ‹è¯•è¿‡æ‰€æœ‰ä¿®æ”¹
- [ ] æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ˜¯å¦æ£€æŸ¥äº†Consoleé”™è¯¯

### æäº¤ä¿¡æ¯æ ¼å¼
```
<type>: <subject>

<body>

ğŸ¤– Generated with Claude Code
```

ç±»å‹: feat, fix, docs, style, refactor, test, chore

## âš¡ æ€§èƒ½ä¼˜åŒ–

### å›¾ç‰‡èµ„æº
- ä½¿ç”¨ WebP æ ¼å¼
- æ·»åŠ æ‡’åŠ è½½
- å‹ç¼©å›¾ç‰‡å¤§å°

### ä»£ç åˆ†å‰²
- è·¯ç”±æ‡’åŠ è½½
- ç»„ä»¶æŒ‰éœ€åŠ è½½

## ğŸ”’ å®‰å…¨è§„èŒƒ

### Tokenå®‰å…¨
- ä¸è¦åœ¨ Console æ‰“å°å®Œæ•´ Token
- ä¸è¦å°† Token æ”¾å…¥ URL
- ä½¿ç”¨ HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### æ•æ„Ÿä¿¡æ¯
- ä¸è¦æäº¤ `.env` æ–‡ä»¶
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
- APIå¯†é’¥ä½¿ç”¨ç¯å¢ƒå˜é‡

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®è´Ÿè´£äºº**: Claude Code Assistant
- **åç«¯é¡¹ç›®**: `/Users/fengdaniu/Documents/cc/YuntuServer`
- **å‰ç«¯é¡¹ç›®**: `/Users/fengdaniu/Documents/cc/yuntucv_web`

---

**æœ€åæ›´æ–°**: 2025-10-22
**ç‰ˆæœ¬**: 1.0.0
